<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Local Mode - Moonsurf Documentation</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poltawski+Nowy:wght@400;500;600;700&display=block" as="style">
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=block" as="style">
  <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
  <nav class="sidebar">
  <div class="sidebar-header">
    <a href="../index.html" class="logo">Moonsurf</a>
  </div>
  <ul class="nav-list">
    <li><a href="../index.html">Moonsurf Browser Control Documentation</a></li>
    <li class="nav-section">
      <span class="section-title"><i data-lucide="rocket"></i>Getting Started</span>
      <ul class="section-items">
        <li><a href="../getting-started/README.html">Overview</a></li>
        <li><a href="../getting-started/connecting-ai-clients.html">Connecting AI Clients</a></li>
        <li><a href="../getting-started/first-automation.html">First Automation</a></li>
        <li><a href="../getting-started/installation.html">Installation</a></li>
      </ul>
    </li>
    <li class="nav-section">
      <span class="section-title"><i data-lucide="lightbulb"></i>Concepts</span>
      <ul class="section-items">
        <li><a href="../concepts/README.html">Overview</a></li>
        <li><a href="../concepts/architecture.html">Architecture</a></li>
        <li><a href="../concepts/browser-modes.html">Browser Modes</a></li>
        <li><a href="../concepts/extension-communication.html">Extension Communication</a></li>
        <li><a href="../concepts/instance-lifecycle.html">Instance Lifecycle</a></li>
        <li><a href="../concepts/mcp-protocol.html">MCP Protocol</a></li>
      </ul>
    </li>
    <li class="nav-section">
      <span class="section-title"><i data-lucide="wrench"></i>Tools</span>
      <ul class="section-items">
        <li><a href="../tools/README.html">Overview</a></li>
        <li><a href="../tools/browser-content.html">browser_content</a></li>
        <li><a href="../tools/browser-debug.html">browser_debug</a></li>
        <li><a href="../tools/browser-emulate.html">browser_emulate</a></li>
        <li><a href="../tools/browser-execute.html">browser_execute</a></li>
        <li><a href="../tools/browser-instance.html">browser_instance</a></li>
        <li><a href="../tools/browser-interact.html">browser_interact</a></li>
        <li><a href="../tools/browser-navigate.html">browser_navigate</a></li>
        <li><a href="../tools/browser-network.html">browser_network</a></li>
        <li><a href="../tools/browser-tab.html">browser_tab</a></li>
      </ul>
    </li>
    <li class="nav-section open">
      <span class="section-title"><i data-lucide="settings"></i>Configuration</span>
      <ul class="section-items">
        <li><a href="../configuration/README.html">Overview</a></li>
        <li><a href="../configuration/authentication.html">Authentication</a></li>
        <li><a href="../configuration/environment-variables.html">Environment Variables</a></li>
        <li><a href="../configuration/local-mode.html" class="active">Local Mode</a></li>
        <li><a href="../configuration/remote-mode.html">Remote Mode</a></li>
        <li><a href="../configuration/security-hardening.html">Security Hardening</a></li>
        <li><a href="../configuration/tls-setup.html">TLS Setup</a></li>
      </ul>
    </li>
    <li class="nav-section">
      <span class="section-title"><i data-lucide="book-open"></i>Guides</span>
      <ul class="section-items">
        <li><a href="../guides/README.html">Overview</a></li>
        <li><a href="../guides/debugging-tips.html">Debugging Tips Guide</a></li>
        <li><a href="../guides/file-downloads.html">File Downloads Guide</a></li>
        <li><a href="../guides/form-filling.html">Form Filling Guide</a></li>
        <li><a href="../guides/handling-popups.html">Handling Popups Guide</a></li>
        <li><a href="../guides/network-interception.html">Network Interception Guide</a></li>
        <li><a href="../guides/testing-workflows.html">Testing Workflows Guide</a></li>
        <li><a href="../guides/web-scraping.html">Web Scraping Guide</a></li>
      </ul>
    </li>
    <li class="nav-section">
      <span class="section-title"><i data-lucide="plug"></i>Integration</span>
      <ul class="section-items">
        <li><a href="../integration/README.html">Overview</a></li>
        <li><a href="../integration/ci-cd.html">CI/CD Integration</a></li>
        <li><a href="../integration/claude-code.html">Claude Code Integration</a></li>
        <li><a href="../integration/claude-desktop.html">Claude Desktop Integration</a></li>
        <li><a href="../integration/cursor.html">Cursor Integration</a></li>
        <li><a href="../integration/custom-clients.html">Custom Client Integration</a></li>
      </ul>
    </li>
    <li class="nav-section">
      <span class="section-title"><i data-lucide="code"></i>Api Reference</span>
      <ul class="section-items">
        <li><a href="../api-reference/README.html">Overview</a></li>
        <li><a href="../api-reference/error-codes.html">Error Codes</a></li>
        <li><a href="../api-reference/http-endpoints.html">HTTP Endpoints</a></li>
        <li><a href="../api-reference/sse-protocol.html">SSE Protocol</a></li>
        <li><a href="../api-reference/websocket-protocol.html">WebSocket Protocol</a></li>
      </ul>
    </li>
    <li class="nav-section">
      <span class="section-title"><i data-lucide="list-checks"></i>Tasks</span>
      <ul class="section-items">
        <li><a href="../tasks/README.html">Overview</a></li>
        <li><a href="../tasks/architecture.html">Architecture Overview</a></li>
        <li><a href="../tasks/configuration.html">Configuration</a></li>
        <li><a href="../tasks/contributing.html">Contributing</a></li>
        <li><a href="../tasks/error-handling.html">Error Handling</a></li>
        <li><a href="../tasks/examples.html">Examples</a></li>
        <li><a href="../tasks/getting-started.html">Getting Started</a></li>
        <li><a href="../tasks/internals.html">Internals</a></li>
        <li><a href="../tasks/rest-api.html">REST API Reference</a></li>
        <li><a href="../tasks/task-format.html">Task Format</a></li>
        <li><a href="../tasks/websocket-api.html">WebSocket API Reference</a></li>
      </ul>
    </li>
    <li class="nav-section">
      <span class="section-title"><i data-lucide="terminal"></i>Development</span>
      <ul class="section-items">
        <li><a href="../development/README.html">Overview</a></li>
        <li><a href="../development/adding-tools.html">Adding Tools</a></li>
        <li><a href="../development/debugging.html">Debugging</a></li>
        <li><a href="../development/extension-development.html">Extension Development</a></li>
        <li><a href="../development/internals.html">Internals</a></li>
        <li><a href="../development/local-setup.html">Local Development Setup</a></li>
        <li><a href="../development/project-structure.html">Project Structure</a></li>
        <li><a href="../development/release-process.html">Release Process</a></li>
        <li><a href="../development/testing.html">Testing</a></li>
      </ul>
    </li>
  </ul>
  <div class="sidebar-footer">
    <div class="version">v2.0.0</div>
    <div class="generated">Generated 2026-01-26</div>
  </div>
</nav>

  <main class="content">
    <article>
      <h1>Local Mode</h1>
<p>Local mode is the default configuration for development and local use. The server binds to localhost and security features are disabled for convenience.</p>
<h2>Default Settings</h2>
<p>When running without <code>REMOTE_MODE=true</code>:</p>
<div class="table-wrapper"><table><thead><tr><th>Setting</th><th>Value</th></tr></thead><tbody><tr><td><code>HOST</code></td><td><code>localhost</code></td></tr><tr><td><code>AUTH_ENABLED</code></td><td><code>false</code></td></tr><tr><td><code>TLS_ENABLED</code></td><td><code>false</code></td></tr><tr><td><code>CORS_ENABLED</code></td><td><code>false</code></td></tr><tr><td><code>RATE_LIMIT_ENABLED</code></td><td><code>false</code></td></tr><tr><td><code>AUDIT_LOG_ENABLED</code></td><td><code>false</code></td></tr><tr><td><code>HEADLESS_DEFAULT</code></td><td><code>false</code></td></tr></tbody></table></div><h2>Basic Usage</h2>
<p>Start the server with defaults:</p>
<pre><code class="language-bash">moonsurf</code></pre><p>Output:</p>
<pre><code class="language-plaintext">[Moonsurf] Server starting...
[Server] Mode: LOCAL
[Server] SSE endpoint: http://localhost:3300/sse
[Config] Server Configuration:
[Config]   Mode: LOCAL
[Config]   HTTP: http://localhost:3300
[Config]   WebSocket: ws://localhost:3301-3399
[Config]   Auth: disabled
[Config]   TLS: disabled
[HTTP] Server listening on localhost:3300</code></pre><h2>Development with Local Extension</h2>
<p>For developing the Chrome extension alongside the MCP server:</p>
<h3>1. Build the Extension</h3>
<pre><code class="language-bash">cd ../chrome-extension
npm install
npm run build
# Or for watch mode:
npm run dev</code></pre><h3>2. Run Server with Local Extension</h3>
<pre><code class="language-bash">EXTENSION_PATH=../chrome-extension/dist moonsurf</code></pre><h3>3. Watch Mode Workflow</h3>
<p><strong>Terminal 1 - Extension (watch mode):</strong></p>
<pre><code class="language-bash">cd ../chrome-extension
npm run dev</code></pre><p><strong>Terminal 2 - MCP Server:</strong></p>
<pre><code class="language-bash">EXTENSION_PATH=../chrome-extension/dist moonsurf</code></pre><p>When you change extension code, rebuild it and restart any browser instances.</p>
<h2>Debug Logging</h2>
<p>Enable verbose logging for troubleshooting:</p>
<pre><code class="language-bash">LOG_LEVEL=debug moonsurf</code></pre><p>This shows:</p>
<ul>
<li>All WebSocket messages</li>
<li>Tool call details</li>
<li>Timing information</li>
<li>Internal state changes</li>
</ul>
<h2>Custom Port</h2>
<p>If port 3300 is in use:</p>
<pre><code class="language-bash">PORT=3400 moonsurf</code></pre><h2>Testing Different Browser Modes</h2>
<h3>Chromium (Default)</h3>
<pre><code class="language-bash">BROWSER_DEFAULT_MODE=chromium moonsurf</code></pre><h3>Chrome for Testing</h3>
<pre><code class="language-bash">BROWSER_DEFAULT_MODE=testing moonsurf</code></pre><h3>Google Chrome</h3>
<pre><code class="language-bash">BROWSER_DEFAULT_MODE=chrome moonsurf</code></pre><h2>Headless Development</h2>
<p>Test headless mode locally:</p>
<pre><code class="language-bash">BROWSER_DEFAULT_MODE=chromium HEADLESS_DEFAULT=true moonsurf</code></pre><h2>Disable Task System</h2>
<p>If you don&#39;t need the task execution feature:</p>
<pre><code class="language-bash">TASKS_ENABLED=false moonsurf</code></pre><p>This saves port 3400 and reduces log noise.</p>
<h2>Quick Test</h2>
<p>After starting the server, verify it&#39;s working:</p>
<pre><code class="language-bash"># Check health
curl http://localhost:3300/health

# List tools
curl -X POST http://localhost:3300/message \
  -H &quot;Content-Type: application/json&quot; \
  -d &#039;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;id&quot;:1,&quot;method&quot;:&quot;tools/list&quot;}&#039;</code></pre><h2>Connecting Claude Code</h2>
<p>For local development with Claude Code:</p>
<pre><code class="language-bash"># Install the skill
moonsurf --install-skill

# Use in Claude Code
/moonsurf-browser</code></pre><p>Or add to MCP config (<code>~/.claude/mcp.json</code>):</p>
<pre><code class="language-json">{
  &quot;mcpServers&quot;: {
    &quot;moonsurf&quot;: {
      &quot;url&quot;: &quot;http://localhost:3300/sse&quot;
    }
  }
}</code></pre><h2>Common Development Scenarios</h2>
<h3>Debugging a Specific Tool</h3>
<ol>
<li>Enable debug logging</li>
<li>Make a tool call</li>
<li>Check the logs</li>
</ol>
<pre><code class="language-bash">LOG_LEVEL=debug moonsurf

# In another terminal
curl -X POST http://localhost:3300/message \
  -H &quot;Content-Type: application/json&quot; \
  -d &#039;{
    &quot;jsonrpc&quot;:&quot;2.0&quot;,
    &quot;id&quot;:1,
    &quot;method&quot;:&quot;tools/call&quot;,
    &quot;params&quot;:{
      &quot;name&quot;:&quot;browser_instance&quot;,
      &quot;arguments&quot;:{&quot;action&quot;:&quot;list&quot;}
    }
  }&#039;</code></pre><h3>Testing with Clean Browser State</h3>
<p>Use testing mode for fresh state each time:</p>
<pre><code class="language-bash">BROWSER_DEFAULT_MODE=testing moonsurf</code></pre><h3>Simulating CI/CD Environment</h3>
<pre><code class="language-bash">BROWSER_DEFAULT_MODE=testing \
HEADLESS_DEFAULT=true \
LOG_LEVEL=info \
moonsurf</code></pre><h2>File Locations</h2>
<div class="table-wrapper"><table><thead><tr><th>Item</th><th>Path</th></tr></thead><tbody><tr><td>Downloaded extension</td><td><code>~/.moonsurf/extension/</code></td></tr><tr><td>Chromium profile</td><td><code>~/.moonsurf/</code></td></tr><tr><td>Temp profiles (testing mode)</td><td><code>/tmp/moonsurf-*/</code></td></tr></tbody></table></div><h2>Troubleshooting</h2>
<h3>&quot;Extension failed to connect&quot;</h3>
<ol>
<li>Check extension is built</li>
<li>Verify <code>EXTENSION_PATH</code> is correct</li>
<li>Check browser console for errors</li>
</ol>
<h3>&quot;Port already in use&quot;</h3>
<pre><code class="language-bash"># Find process using port
lsof -i :3300

# Use different port
PORT=3400 moonsurf</code></pre><h3>&quot;Chromium not found&quot;</h3>
<p>Install Chromium:</p>
<pre><code class="language-bash"># macOS
brew install --cask chromium

# Linux
sudo apt install chromium-browser</code></pre><h2>Related</h2>
<ul>
<li><a href="environment-variables.html">Environment Variables</a> - All configuration options</li>
<li><a href="remote-mode.html">Remote Mode</a> - Production deployment</li>
<li><a href="../development/local-setup.html">Development Setup</a> - Contributing guide</li>
</ul>

    </article>
  </main>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>
    // Initialize Lucide icons
    lucide.createIcons();

    // Initialize syntax highlighting
    hljs.highlightAll();

    // Toggle sections
    document.querySelectorAll('.section-title').forEach(title => {
      title.addEventListener('click', () => {
        title.parentElement.classList.toggle('open');
      });
    });
  </script>
</body>
</html>